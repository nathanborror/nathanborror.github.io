{"version":"https://jsonfeed.org/version/1.1","title":"Nathan Borror","home_page_url":"https://nathan.run/","feed_url":"https://nathan.run/posts/2008/index.json","authors":[{"name":"Nathan Borror","url":"https://nathan.run"}],"items":[{"title":"Save RAM with mobile middleware","date_published":"2009-10-07T00:00:00-0800","date_modified":"2009-10-07T00:00:00-0800","id":"https://nathan.run/2009/save-ram-with-mobile-middleware/","url":"https://nathan.run/2009/save-ram-with-mobile-middleware/","content_html":"\u003cp\u003eA while back I wrote an article on how to set up a mobile site with Django ../going-mobile. Currently I have a Slicehost account which includes 256MB of RAM. My resources are tight and I really dislike having another set of unnecessary Apache processes for a mobile site that, aside from different templates, is using the same code base. The solution is quite simple, write a middleware.\u003c/p\u003e\n\u003cp\u003eThe following code checks the incoming request for \u0026rsquo;m' or \u0026lsquo;mobile\u0026rsquo; in the domain name. If it exists the TEMPLATE_DIRS is replaced by a MOBILE_TEMPLATE_DIRS setting:\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4\"\u003e\u003ccode class=\"language-python\" data-lang=\"python\"\u003e\u003cspan style=\"color:#66d9ef\"\u003eclass\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003eMobileMiddleware\u003c/span\u003e(object):\n  \u003cspan style=\"color:#66d9ef\"\u003edef\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003eprocess_request\u003c/span\u003e(self, request):\n    domain \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e request\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003eMETA\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003eget(\u003cspan style=\"color:#e6db74\"\u003e\u0026#39;HTTP_HOST\u0026#39;\u003c/span\u003e, \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;\u0026#39;\u003c/span\u003e)\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003esplit(\u003cspan style=\"color:#e6db74\"\u003e\u0026#39;.\u0026#39;\u003c/span\u003e)\n\n    \u003cspan style=\"color:#66d9ef\"\u003eif\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;m\u0026#39;\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003ein\u003c/span\u003e domain \u003cspan style=\"color:#f92672\"\u003eor\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;mobile\u0026#39;\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003ein\u003c/span\u003e domain:\n      settings\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003eTEMPLATE_DIRS \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e settings\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003eMOBILE_TEMPLATE_DIRS\n    \u003cspan style=\"color:#66d9ef\"\u003eelse\u003c/span\u003e:\n      settings\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003eTEMPLATE_DIRS \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e settings\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003eDESKTOP_TEMPLATE_DIRS\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cp\u003eYou\u0026rsquo;ll notice this requires you to also have a DESKTOP_TEMPLATE_DIRS (or whatever you want to call it) so you can switch back to the desktop version.\u003c/p\u003e\n\u003cp\u003eIf you\u0026rsquo;re using any sort of caching you\u0026rsquo;ll want be sure and change CACHE_MIDDLEWARE_KEY_PREFIX when you change to mobile templates and back again.\u003c/p\u003e\n\u003cp\u003eYou\u0026rsquo;ll probably want to place this middleware after Session and Authentication Middleware and before the Cache Middleware like so:\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4\"\u003e\u003ccode class=\"language-python\" data-lang=\"python\"\u003eMIDDLEWARE_CLASSES \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e (\n  \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;django.contrib.sessions.middleware.SessionMiddleware\u0026#39;\u003c/span\u003e,\n  \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;django.contrib.auth.middleware.AuthenticationMiddleware\u0026#39;\u003c/span\u003e,\n  \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;playgroundblues.middleware.MobileMiddleware\u0026#39;\u003c/span\u003e,\n  \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;django.middleware.cache.UpdateCacheMiddleware\u0026#39;\u003c/span\u003e,\n  \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;django.middleware.common.CommonMiddleware\u0026#39;\u003c/span\u003e,\n  \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;django.middleware.cache.FetchFromCacheMiddleware\u0026#39;\u003c/span\u003e,\n)\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cp\u003eGo Green! Save RAM! (kidding)\u003c/p\u003e\n"},{"title":"What's next","date_published":"2008-12-12T00:00:00-0800","date_modified":"2008-12-12T00:00:00-0800","id":"https://nathan.run/2008/whats-next/","url":"https://nathan.run/2008/whats-next/","content_html":"\u003cp\u003eDoes it make sense to reinvent the wheel every time we start a new project? No. My work echoes my past and I stand by it. Some say, \u0026ldquo;that looks like Readernaut\u0026rdquo; or \u0026ldquo;that looks like Playground Blues\u0026rdquo; and I say yes, they are me.\u003c/p\u003e\n\u003cp\u003eIf it worked there it will work here. When a problem is solved I move on because each project has its fair amount of new problems and I\u0026rsquo;d rather spend time on new, more interesting problems. This doesn\u0026rsquo;t mean I don\u0026rsquo;t improve on past solutions. Everything evolves.\u003c/p\u003e\n\u003cp\u003eWe all bring our individual design style and solutions to the table. Projects are a collection of problems and if you quickly eliminate the solved problems you can dig your heals into the unsolved.\u003c/p\u003e\n"},{"title":"Message Queuing imports","date_published":"2008-09-05T00:00:00-0800","date_modified":"2008-09-05T00:00:00-0800","id":"https://nathan.run/2008/message-queuing-imports/","url":"https://nathan.run/2008/message-queuing-imports/","content_html":"\u003cp\u003eLast week I ran into some problems dealing with large book imports on Readernaut. I tested the system for around 50-100 books but had no idea people would upload lists of 900+ books. This begged the question, how do you handle importing very large sets of data before the browser times out?\u003c/p\u003e\n\u003ch2 id=\"brief-example\"\u003eBrief example\u003c/h2\u003e\n\u003cp\u003eUser uploads a list of 1000 ISBNs to be imported into their library. Each book, if not already in the system, needs to be imported via another service like Amazon.\u003c/p\u003e\n\u003ch2 id=\"solution-1-threading\"\u003eSolution 1: Threading\u003c/h2\u003e\n\u003cp\u003eUse threading to push off the long running process to another thread while directing the browser to a status page. You could setup an Ajax request to periodically check on the status of the import and update a progress bar.\u003c/p\u003e\n\u003cp\u003eThis solution is generally a bad idea. It\u0026rsquo;s super easy to do and tests well in a development environment, but has scary consequences down the road, especially if you don\u0026rsquo;t have a lot of server resources.\u003c/p\u003e\n\u003ch2 id=\"solution-2-message-queuing\"\u003eSolution 2: Message Queuing\u003c/h2\u003e\n\u003cp\u003e\u003ca href=\"http://en.wikipedia.org/wiki/Message_queue\"\u003eMessage queuing\u003c/a\u003e is a very basic asynchronous method of storing items in a queue to be processed later.\u003c/p\u003e\n\u003cp\u003eSo for this instance I created a model called Message that has three fields:\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4\"\u003e\u003ccode class=\"language-python\" data-lang=\"python\"\u003e\u003cspan style=\"color:#66d9ef\"\u003eclass\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003eMessage\u003c/span\u003e(models\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003eModel):\n    user \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e models\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003eForeignKey(User)\n    subject \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e models\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003eCharField(max_length\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#ae81ff\"\u003e100\u003c/span\u003e)\n    message \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e models\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003eTextField()\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cp\u003eThis allowed me to slurp in the list of ISBNs and break them out into 20 book chunks. Each chunk gets related to a user and a subject of \u0026ldquo;book_import.\u0026rdquo; Once it\u0026rsquo;s finished I can send the user to a progress page where each chunk is processed one by one until they\u0026rsquo;re gone. Here\u0026rsquo;s a simple example of a progress view:\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4\"\u003e\u003ccode class=\"language-python\" data-lang=\"python\"\u003e\u003cspan style=\"color:#66d9ef\"\u003edef\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003ebook_import_progress\u003c/span\u003e(request):\n    message_list \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e Message\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003eobjects\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003efilter(user\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003erequest\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003euser, subject\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e\u0026#39;book_import\u0026#39;\u003c/span\u003e)\n    handle_message(message_list[\u003cspan style=\"color:#ae81ff\"\u003e0\u003c/span\u003e])\n    \u003cspan style=\"color:#66d9ef\"\u003eif\u003c/span\u003e len(message_list) \u003cspan style=\"color:#f92672\"\u003e\u0026gt;\u003c/span\u003e \u003cspan style=\"color:#ae81ff\"\u003e0\u003c/span\u003e:\n  \u003cspan style=\"color:#66d9ef\"\u003ereturn\u003c/span\u003e render_to_response(\u003cspan style=\"color:#e6db74\"\u003e\u0026#39;books/progress.html\u0026#39;\u003c/span\u003e, {}, context_instance\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003eRequestContext(request))\n    \u003cspan style=\"color:#66d9ef\"\u003eelse\u003c/span\u003e:\n  \u003cspan style=\"color:#66d9ef\"\u003ereturn\u003c/span\u003e HttpResponseRedirect(\u003cspan style=\"color:#e6db74\"\u003e\u0026#39;/user/books\u0026#39;\u003c/span\u003e)\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cp\u003eFirst we get a list of messages, then we process the first 20 books. If there are more messages to be processed we refresh the page otherwise we send the user to their books page.\u003c/p\u003e\n\u003cp\u003eAdditionally it\u0026rsquo;s super simple to Ajaxify the progress page by using Django\u0026rsquo;s handy \u003ccode\u003erequest.is_ajax()\u003c/code\u003e and returning a JSON object with info on the progress of the import. Message Queuing is pretty handy for a lot of situations and Amazon even has a service for it called \u003ca href=\"http://www.amazon.com/Simple-Queue-Service-home-page/b?ie=UTF8\u0026amp;node=13584001\"\u003eSimple Queuing Service\u003c/a\u003e (SQS).\u003c/p\u003e\n"},{"title":"Creating a basic API with Django","date_published":"2008-08-11T00:00:00-0800","date_modified":"2008-08-11T00:00:00-0800","id":"https://nathan.run/2008/creating-a-basic-api-with-django/","url":"https://nathan.run/2008/creating-a-basic-api-with-django/","content_html":"\u003cp\u003eCreating a simple public API for your site is a lot easier than you may think with Django. You\u0026rsquo;re basically just creating another view and serving it as XML or JSON instead of HTML.\u003c/p\u003e\n\u003ch2 id=\"whats-public\"\u003eWhat\u0026rsquo;s public?\u003c/h2\u003e\n\u003cp\u003eDecide what you want to be public. The best answer is the stuff you\u0026rsquo;re already displaying in your HTML templates. Then you need to create an entry in your url conf.\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4\"\u003e\u003ccode class=\"language-python\" data-lang=\"python\"\u003eurl(\u003cspan style=\"color:#e6db74\"\u003er\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e\u0026#39;^api/v1/(?P\u0026lt;username\u0026gt;[-\\w]+)/notes/?$\u0026#39;\u003c/span\u003e, \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;readernaut.api.views.user_notes\u0026#39;\u003c/span\u003e),\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch2 id=\"create-the-view\"\u003eCreate the view\u003c/h2\u003e\n\u003cp\u003eIn the case for Readernaut I wanted to provide an XML feed for users notes. Here is what the view looks like:\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4\"\u003e\u003ccode class=\"language-python\" data-lang=\"python\"\u003e\u003cspan style=\"color:#66d9ef\"\u003edef\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003euser_notes\u003c/span\u003e(request, username):\n  reader \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e get_object_or_404(User, username__iexact\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003eusername)\n  note_list \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e Note\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003eobjects\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003efilter(user\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003ereader)\n  context \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e { \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;reader\u0026#39;\u003c/span\u003e: reader, \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;note_list\u0026#39;\u003c/span\u003e: note_list }\n  \u003cspan style=\"color:#66d9ef\"\u003ereturn\u003c/span\u003e render_to_response(\u003cspan style=\"color:#e6db74\"\u003e\u0026#39;api/note_list.html\u0026#39;\u003c/span\u003e, context, context_instance\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003eRequestContext(request), mimetype\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e\u0026#39;application/xml\u0026#39;\u003c/span\u003e)\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cp\u003eThis is a simplified version of the view but, as you can see, you could easily add pagination and other hooks to handle ordering and such.\u003c/p\u003e\n\u003ch2 id=\"create-the-template\"\u003eCreate the template\u003c/h2\u003e\n\u003cp\u003eThe view is pointing to the template \u003ccode\u003eapi/note_list.html\u003c/code\u003e so all we need to do is create that file and build out our XML schema.\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4\"\u003e\u003ccode class=\"language-xml\" data-lang=\"xml\"\u003e\u003cspan style=\"color:#75715e\"\u003e\u0026lt;?xml version=\u0026#34;1.0\u0026#34; encoding=\u0026#34;utf-8\u0026#34;?\u0026gt;\u003c/span\u003e\n\u003cspan style=\"color:#f92672\"\u003e\u0026lt;notes\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003eversion=\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;1.0\u0026#34;\u003c/span\u003e\u003cspan style=\"color:#f92672\"\u003e\u0026gt;\u003c/span\u003e\n  {% for note in note_list %}\n  \u003cspan style=\"color:#f92672\"\u003e\u0026lt;note\u0026gt;\u003c/span\u003e\n    \u003cspan style=\"color:#f92672\"\u003e\u0026lt;note_id\u0026gt;\u003c/span\u003e{{ note.id }}\u003cspan style=\"color:#f92672\"\u003e\u0026lt;/note_id\u0026gt;\u003c/span\u003e\n    \u003cspan style=\"color:#f92672\"\u003e\u0026lt;user\u0026gt;\u003c/span\u003e\n      \u003cspan style=\"color:#f92672\"\u003e\u0026lt;username\u0026gt;\u003c/span\u003e{{ note.user }}\u003cspan style=\"color:#f92672\"\u003e\u0026lt;/username\u0026gt;\u003c/span\u003e\n    \u003cspan style=\"color:#f92672\"\u003e\u0026lt;/user\u0026gt;\u003c/span\u003e\n    \u003cspan style=\"color:#f92672\"\u003e\u0026lt;book_edtion\u0026gt;\u003c/span\u003e\n      \u003cspan style=\"color:#f92672\"\u003e\u0026lt;title\u0026gt;\u003c/span\u003e{{ note.book_edition }}\u003cspan style=\"color:#f92672\"\u003e\u0026lt;/title\u0026gt;\u003c/span\u003e\n      \u003cspan style=\"color:#f92672\"\u003e\u0026lt;isbn\u0026gt;\u003c/span\u003e{{ note.book_edition.isbn }}\u003cspan style=\"color:#f92672\"\u003e\u0026lt;/isbn\u0026gt;\u003c/span\u003e\n    \u003cspan style=\"color:#f92672\"\u003e\u0026lt;/book_edtion\u0026gt;\u003c/span\u003e\n    \u003cspan style=\"color:#f92672\"\u003e\u0026lt;body\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003eclass=\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;inner\u0026#34;\u003c/span\u003e\u003cspan style=\"color:#f92672\"\u003e\u0026gt;\u003c/span\u003e\n\n\u003cspan style=\"color:#f92672\"\u003e\u0026lt;header\u0026gt;\u003c/span\u003e   \u003cspan style=\"color:#f92672\"\u003e\u0026lt;h1\u0026gt;\u0026lt;a\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003ehref=\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;/\u0026#34;\u003c/span\u003e\u003cspan style=\"color:#f92672\"\u003e\u0026gt;\u003c/span\u003eNathan Borror\u003cspan style=\"color:#f92672\"\u003e\u0026lt;/a\u0026gt;\u0026lt;/h1\u0026gt;\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e\u0026lt;/header\u0026gt;\u003c/span\u003e\u003cspan style=\"color:#75715e\"\u003e\u0026lt;![CDATA[{{ note.note }}]]\u0026gt;\u003c/span\u003e\u003cspan style=\"color:#f92672\"\u003e\u0026lt;/body\u0026gt;\u003c/span\u003e\n    \u003cspan style=\"color:#f92672\"\u003e\u0026lt;page_reference\u0026gt;\u003c/span\u003e{{ note.page_reference }}\u003cspan style=\"color:#f92672\"\u003e\u0026lt;/page_reference\u0026gt;\u003c/span\u003e\n    \u003cspan style=\"color:#f92672\"\u003e\u0026lt;created\u0026gt;\u003c/span\u003e{{ note.created|date:\u0026#34;Y-m-d G:i T\u0026#34; }}\u003cspan style=\"color:#f92672\"\u003e\u0026lt;/created\u0026gt;\u003c/span\u003e\n    \u003cspan style=\"color:#f92672\"\u003e\u0026lt;modified\u0026gt;\u003c/span\u003e{{ note.modified|date:\u0026#34;Y-m-d G:i T\u0026#34; }}\u003cspan style=\"color:#f92672\"\u003e\u0026lt;/modified\u0026gt;\u003c/span\u003e\n  \u003cspan style=\"color:#f92672\"\u003e\u0026lt;/note\u0026gt;\u003c/span\u003e\n  {% endfor %}\n\u003cspan style=\"color:#f92672\"\u003e\u0026lt;/notes\u0026gt;\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cp\u003eHow you define your XML templates is up to you. I name my templates with the \u003ccode\u003e.html\u003c/code\u003e extension simply because my text editor highlights the syntax better than if it were XML. It doesn\u0026rsquo;t matter because the mime-type dictates how the file is served up. Good luck!\u003c/p\u003e\n"},{"title":"Capistrano rules","date_published":"2008-05-17T00:00:00-0800","date_modified":"2008-05-17T00:00:00-0800","id":"https://nathan.run/2008/capistrano-rules/","url":"https://nathan.run/2008/capistrano-rules/","content_html":"\u003cp\u003eI\u0026rsquo;ve grown tired of committing changes to my subversion repository, logging into my server, updating my live checkout, and restarting python processes. I finally decided to implement \u003ca href=\"http://www.capify.org/\"\u003eCapistrano\u003c/a\u003e and eliminate this repetition.\u003c/p\u003e\n\u003cp\u003eHere are my repetitive set of commands:\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4\"\u003e\u003ccode class=\"language-bash\" data-lang=\"bash\"\u003e$ ssh playgroundblues.com\n$ cd ~/projects/playgroundblues\n$ svn up\n$ cd ~/www/playgroundblues.com/www\n$ touch django.fcgi\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cp\u003eNow, with the help of Capistrano, I just type:\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4\"\u003e\u003ccode class=\"language-bash\" data-lang=\"bash\"\u003e$ cap deploy\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cp\u003eYou\u0026rsquo;ll first need to \u003ca href=\"http://www.capify.org/install\"\u003einstall Capistrano\u003c/a\u003e which is as simple as \u003ccode\u003egem install -y capistrano\u003c/code\u003e. Once that\u0026rsquo;s complete you need to create a \u0026ldquo;capfile\u0026rdquo; which is where you\u0026rsquo;ll define your tasks:\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4\"\u003e\u003ccode class=\"language-ruby\" data-lang=\"ruby\"\u003etask \u003cspan style=\"color:#e6db74\"\u003e:deploy\u003c/span\u003e, \u003cspan style=\"color:#e6db74\"\u003e:hosts\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e=\u0026gt;\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;username@playgroundblues.com\u0026#34;\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003edo\u003c/span\u003e\n  run \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;cd ~/projects/playgroundblues; svn up; cd ~/www/playgroundblues.com/www/; touch django.fcgi\u0026#34;\u003c/span\u003e\n\u003cspan style=\"color:#66d9ef\"\u003eend\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cp\u003eThe above will vary depending on your host and directory setup. After you save the above file and as long as you\u0026rsquo;re in the directory where the capfile resides you can, in the terminal, type \u003ccode\u003ecap deploy\u003c/code\u003e and Capistrano does the rest. Bliss.\u003c/p\u003e\n"},{"title":"Aspen Simulator","date_published":"2008-05-13T00:00:00-0800","date_modified":"2008-05-13T00:00:00-0800","id":"https://nathan.run/2008/aspen-simulator/","url":"https://nathan.run/2008/aspen-simulator/","content_html":"\u003cp\u003eAs much as I\u0026rsquo;d like to blog about my trip to Austin and SXSW last week I\u0026rsquo;m just too excited over the \u003ca href=\"http://developer.apple.com/iphone/program/\"\u003eiPhone SDK\u003c/a\u003e goodies that dropped last Thursday.\u003c/p\u003e\n\u003cp\u003eYou may be asking yourself, \u0026ldquo;he\u0026rsquo;s a web guy, why does he care?\u0026rdquo; Well, there happens to be a beautiful gem tucked away called the Aspen Simulator.\u003c/p\u003e\n\u003cp\u003eThis is a complete pixel and functionally perfect replica of the iPhone and it\u0026rsquo;s fantastic for testing web apps. Before I was spending a lot of time back and forth between my iPhone and my desktop but since this thing is so identical I really don\u0026rsquo;t have to own an iPhone (but I will anyway).\u003c/p\u003e\n\u003cp\u003eIt\u0026rsquo;s a little hard to find, but after installing the \u003ca href=\"http://developer.apple.com/iphone/devcenter/\"\u003edeveloper tools\u003c/a\u003e look under / Developer / Platforms / AspenSimulator.platform / Developer / Applications.\u003c/p\u003e\n\u003ch2 id=\"a-few-tricks\"\u003eA few tricks\u003c/h2\u003e\n\u003cp\u003eIf you want to do a two finger zoom just hold down the option key while click dragging. You can also rotate the the phone by using the command key and right left arrows. To lock the phone press command L. Still try to figure out how to do a two finger scroll.\u003c/p\u003e\n"},{"title":"Ah-ha Event Delegation","date_published":"2008-05-05T00:00:00-0800","date_modified":"2008-05-05T00:00:00-0800","id":"https://nathan.run/2008/ah-ha-event-delegation/","url":"https://nathan.run/2008/ah-ha-event-delegation/","content_html":"\u003cp\u003eWrapping my head around things like OOP took months. It\u0026rsquo;s not because I\u0026rsquo;m an idiot (I don\u0026rsquo;t think) - it\u0026rsquo;s just because I needed all the explanations to marinate before having an ah-ha! moment.\u003c/p\u003e\n\u003cp\u003eI had an ah-ha today, with regards to Event Delegation. I\u0026rsquo;ve never seemed to completely understand events, yet I use them all the time. They\u0026rsquo;re an essential aspect of Actionscript and Javascript and there are two basic ways of capturing events, Event Handling and Event Delegation.\u003c/p\u003e\n\u003cp\u003eMost of us, whether we realize it or not, are familiar with Event Handling. Imagine we have an unordered list with a class name \u003ccode\u003e.nav\u003c/code\u003e and each item has a link. For this example, I\u0026rsquo;m going to use jQuery, so if you wanted to call a javascript function when the user clicks a link in the list, you\u0026rsquo;d do the following:\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4\"\u003e\u003ccode class=\"language-js\" data-lang=\"js\"\u003e\u003cspan style=\"color:#a6e22e\"\u003e$\u003c/span\u003e(\u003cspan style=\"color:#e6db74\"\u003e\u0026#39;.nav a\u0026#39;\u003c/span\u003e).\u003cspan style=\"color:#a6e22e\"\u003eeach\u003c/span\u003e(\u003cspan style=\"color:#66d9ef\"\u003efunction\u003c/span\u003e() {\n    \u003cspan style=\"color:#a6e22e\"\u003e$\u003c/span\u003e(\u003cspan style=\"color:#66d9ef\"\u003ethis\u003c/span\u003e).\u003cspan style=\"color:#a6e22e\"\u003eclick\u003c/span\u003e(\u003cspan style=\"color:#a6e22e\"\u003ehandleClick\u003c/span\u003e);\n});\n\n\u003cspan style=\"color:#66d9ef\"\u003efunction\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003ehandleClick\u003c/span\u003e(\u003cspan style=\"color:#a6e22e\"\u003eevent\u003c/span\u003e) {\n    \u003cspan style=\"color:#75715e\"\u003e// fun stuff goes here\n\u003c/span\u003e\u003cspan style=\"color:#75715e\"\u003e\u003c/span\u003e}\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cp\u003eIf you\u0026rsquo;re jQuery savvy, the above code should be familiar. We\u0026rsquo;re looping over all the anchor tags within the unordered list and assigning the function \u0026ldquo;handleClick\u0026rdquo; to the click event. Each time someone clicks a link, \u0026ldquo;handleClick\u0026rdquo; is called and the anchor tag is in the function scope. This is Event Handling.\u003c/p\u003e\n\u003cp\u003eEvent Delegation makes things a little simpler by eliminating the need to loop over every anchor tag. We simply apply the click event to the unordered list like so:\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4\"\u003e\u003ccode class=\"language-js\" data-lang=\"js\"\u003e\u003cspan style=\"color:#a6e22e\"\u003e$\u003c/span\u003e(\u003cspan style=\"color:#e6db74\"\u003e\u0026#39;.nav\u0026#39;\u003c/span\u003e).\u003cspan style=\"color:#a6e22e\"\u003eclick\u003c/span\u003e(\u003cspan style=\"color:#a6e22e\"\u003ehandleClick\u003c/span\u003e);\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cp\u003eSince the click event is registered with the unordered list, it gets fired off when anything inside the list is clicked. The scope of the handleClick function is set to the \u003ccode\u003e\u0026lt;ul\u0026gt;\u003c/code\u003e but if you want to target the anchor tag below the mouse click, you use \u003ccode\u003eevent.target\u003c/code\u003e. This is Event Delegation.\u003c/p\u003e\n\u003cp\u003eBoth are very powerful but in most instances Event Delegation is going to require less code while boosting performance. Many thanks to Jacob Kaplan-Moss for making this ah-ha moment possible.\u003c/p\u003e\n"},{"title":"Gadget fast","date_published":"2008-04-18T00:00:00-0800","date_modified":"2008-04-18T00:00:00-0800","id":"https://nathan.run/2008/gadget-fast/","url":"https://nathan.run/2008/gadget-fast/","content_html":"\u003cp\u003eMy iPhone and laptop will be unplugged starting Friday evening for two days. I\u0026rsquo;ve let the fog of distractions generated by these two devices grow too thick so for the next few days they\u0026rsquo;ll be turned off.\u003c/p\u003e\n\u003cp\u003eIt doesn\u0026rsquo;t stop there. The following week Twitter, Flickr, an my feed reader will be muted. I have nothing against these services, but it\u0026rsquo;s time to step back and take the pulse of things around me and see if I\u0026rsquo;m missing something.\u003c/p\u003e\n\u003cp\u003eI used to do more gadget/service fasting and I\u0026rsquo;m well over due. My plan is to do some brainstorming for a few projects currently on my plate and catch up on some reading, but more importantly, spend time with my girlfriend.\u003c/p\u003e\n\u003cp\u003eSee you all next week!\u003c/p\u003e\n"},{"title":"Going mobile","date_published":"2008-02-18T00:00:00-0800","date_modified":"2008-02-18T00:00:00-0800","id":"https://nathan.run/2008/going-mobile/","url":"https://nathan.run/2008/going-mobile/","content_html":"\u003cp\u003eOver the weekend, I decided to whip up a mobile (iPhone) version of Playground Blues. I walked into Broadway Cafe around 3pm on Saturday, and by 5:30, I had m.playgroundblues.com. Here\u0026rsquo;s how it went down.\u003c/p\u003e\n\u003ch2 id=\"step-1\"\u003eStep 1\u003c/h2\u003e\n\u003cp\u003eSince I\u0026rsquo;m still using Dreamhost and FastCGI, I created my .htaccess file along with my dispatch.fcgi file for my new sub-domain as usual. Made one little change to my dispatch file: instead of having \u003ccode\u003eDJANGO_SETTINGS_MODULE\u003c/code\u003e pointing to playgroundblues.settings, I pointed it to playgroundblues.settings_mobile.\u003c/p\u003e\n\u003cp\u003eThen, in my project folder, I made a duplicate of my settings file and renamed it to \u003ccode\u003esettings_mobile.py.\u003c/code\u003e Let me emphasize again, this is a duplicate.\u003c/p\u003e\n\u003ch2 id=\"step-2\"\u003eStep 2\u003c/h2\u003e\n\u003cp\u003eCreated a new templates folder and named it \u0026ldquo;templates_mobile.\u0026rdquo; Opened up my \u003ccode\u003esettings_mobile.py\u003c/code\u003e file and added a new line to the top of my \u003ccode\u003eTEMPLATE_DIRS\u003c/code\u003e tuple. This tells Django to first look in mobile templates, and if the template doesn\u0026rsquo;t exist, fall back on regular site templates. (Remember, this is only for my mobile site.)\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4\"\u003e\u003ccode class=\"language-python\" data-lang=\"python\"\u003eTEMPLATE_DIRS \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e (\n  \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;/home/playgroundblues/templates_mobile/\u0026#34;\u003c/span\u003e,\n  \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;/home/playgroundblues/templates/\u0026#34;\u003c/span\u003e,\n)\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch2 id=\"step-3\"\u003eStep 3\u003c/h2\u003e\n\u003cp\u003eIn my new templates_mobile folder, I created a new base template called \u003ccode\u003ebase_mobile.html\u003c/code\u003e which I\u0026rsquo;ll use to extend in all my child templates instead of the main sites base.html. Then I went through the sites pages and recreated mirrored templates in the mobile folder. So \u003ccode\u003e/templates/blog/post_detail.html\u003c/code\u003e was overwritten by \u003ccode\u003e/templates_mobile/blog/post_detail.html.\u003c/code\u003e I stripped out extraneous content that was unnecessary for someone on the go, leaving core content and functionality.\u003c/p\u003e\n\u003cp\u003eThe nice thing is if someone happens to creep into a section that you haven\u0026rsquo;t gotten to (as long as you didn\u0026rsquo;t override base.html), your site will display as it would on a computer proper. If there\u0026rsquo;s a more succinct way of doing this, please let me know.\u003c/p\u003e\n"},{"title":"iPhone bookmark iconage","date_published":"2008-01-15T00:00:00-0800","date_modified":"2008-01-15T00:00:00-0800","id":"https://nathan.run/2008/iphone-bookmark-iconage/","url":"https://nathan.run/2008/iphone-bookmark-iconage/","content_html":"\u003cp\u003eIf you\u0026rsquo;re wondering how to control the icon that gets generated for your webpage with the new 1.1.3 iPhone release, look no further than Apple\u0026rsquo;s iPhone Dev Center.\u003c/p\u003e\n\u003cp\u003eApple has added a section called \u0026ldquo;Create a WebClip Bookmark Icon\u0026rdquo; and it calls for a 57x57 pixel icon. After some testing today I\u0026rsquo;ve concluded this recommended sizing results in a fuzzy icon, largely due to the iPhone being a 163 ppi display.\u003c/p\u003e\n\u003cp\u003eInstead of sticking with the recommended sizing I bumped it up to 158x158. When this gets scaled you\u0026rsquo;ll be left with a crisp icon that sits nicely amongst Apples crisp icons. Onward.\u003c/p\u003e\n"}]}